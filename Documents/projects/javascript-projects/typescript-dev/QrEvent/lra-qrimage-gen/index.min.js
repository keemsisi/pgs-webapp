var offset=document.getElementById("div-header").offsetTop;var xhr=new XMLHttpRequest();xhr.responseType="json";var xhr1=new XMLHttpRequest();xhr1.responseType="json";var xhr2=new XMLHttpRequest();xhr2.responseType="json";window.onload=()=>{populateTable()}
setInterval(()=>{getGuestCount();getCheckedIn();getCheckedOut()},5000);function getGuestCount(){xhr.open("GET","/guest/registeredguest/count/all");xhr.response="json";xhr.send();xhr.onreadystatechange=()=>{if(xhr.readyState===4){document.getElementById("guest-count").innerHTML=xhr.response.rows[0].count;xhr.abort()}}}
function getCheckedIn(){xhr1.open("GET",`/guest/registeredguest/count/?argv=${true}`);xhr1.response="json";xhr1.send();xhr1.onreadystatechange=()=>{if(xhr1.readyState===4){document.getElementById("guest-checkin-count").innerHTML=xhr1.response.rows[0].count;xhr1.abort()}}}
function getCheckedOut(){xhr2.open("GET",`/guest/registeredguest/count/?argv=${false}`);xhr2.response="json";xhr2.send();xhr2.onreadystatechange=()=>{if(xhr2.readyState===4){document.getElementById("guest-checkout-count").innerHTML=xhr2.response.rows[0].count;xhr2.abort()}}}
function populateTable(){var oldTableBody=document.getElementById("table-body");while(oldTableBody.firstChild){oldTableBody.removeChild(oldTableBody.firstChild)}
var responseData=[0];var dataCounter=1;var offSet=0;var _count=0;setInterval(()=>{if(responseData.length!=0){xhr.open("GET",`https://cedarqr-image-gen.appspot.com/guest/registeredguest/all/${20}/${offSet}`);xhr.send();xhr.onreadystatechange=()=>{if(xhr.readyState===4){responseData=xhr.response;responseData.forEach(guest=>{var tableBody=document.getElementById("table-body");var tableRow=document.createElement("tr");var tableRowHead=document.createElement("th");tableRowHead.scope="col";var tableData1=document.createElement("td");var tableData2=document.createElement("td");var tableData3=document.createElement("td");var tableData4=document.createElement("td");var tableData5=document.createElement("td");var tableData6=document.createElement("td");var tableData7=document.createElement("td");var tableData8=document.createElement("td");var tableData9=document.createElement("td");var tableData10=document.createElement("td");var tableData11=document.createElement("td");var tableData12=document.createElement("th");tableData12.scope="row";tableData1.innerHTML=guest.firstname;tableData2.innerHTML=guest.lastname;tableData3.innerHTML=guest.phonenumber;tableData4.innerHTML=guest.datecreated;tableData5.innerHTML=guest.last_checked_in;tableData6.innerHTML=guest.last_checked_out;tableData7.innerHTML=guest.checked_in;tableData8.innerHTML=guest.home_address;tableData9.innerHTML=guest.house_color;tableData10.innerHTML=guest.gender;tableData11.innerHTML=guest.age;tableData12.innerHTML=dataCounter++;tableRow.appendChild(tableData12);tableRow.appendChild(tableData1);tableRow.appendChild(tableData2);tableRow.appendChild(tableData3);tableRow.appendChild(tableData4);tableRow.appendChild(tableData5);tableRow.appendChild(tableData6);tableRow.appendChild(tableData7);tableRow.appendChild(tableData8);tableRow.appendChild(tableData9);tableRow.appendChild(tableData10);tableRow.appendChild(tableData11);$('td').addClass("animated fadeInUp");tableBody.appendChild(tableRow)})}}}
offSet+=20},500)}